---
name: fail-analyze
description: 当`Check`,`Complete`或`RunTestCases`等工具的执行结果为**fail**或**未通过**时使用该技能,帮助系统地分析失败原因并提供详细的修正方案从而通过检查
---

# fail-analyze

## 核心原则

1. **精确分类** - 首先判断是代码错误、文档格式错误还是文档内容错误
2. **模板优先** - 优先阅读并遵循模板规范
3. **全面排查** - 修正后进行全面检查,避免遗漏

## Checker 失败类型分析

### 类型1: 代码错误

#### 1.1 不符合模板写法

**常见问题:**
- 函数命名不符合模板规范(`api_*`格式)
- 函数参数顺序与模板不一致
- 缺少必要的类型注解或文档字符串
- 测试函数结构不符合模板要求
- 覆盖率标记代码格式错误

**解决方案步骤:**

**步骤1: 重新阅读相关模板**

**步骤2: 对比模板要求**

**步骤3: 严格按照模板格式修正**

#### 1.2 Python语法错误

**常见问题:**
- 缺少冒号(`:`)在函数定义、if/for/while等语句后
- 缺少逗号(`,`)在参数列表中
- 缩进不一致(混用空格和Tab,或缩进层级错误)
- 括号不匹配
- 字符串引号不匹配
- 导入语句错误

**解决方案步骤:**

**步骤1: 定位语法错误位置**

**步骤2: 修正语法错误**

**步骤3: 全面语法排查**


### 类型2: 文档格式错误

**常见问题:**
- 标题格式不正确(缺少空格、缺少空行)
- 代码块未闭合或缺少语言标记
- 列表缩进不符合规范
- 表格格式不完整
- Markdown特殊字符未转义

**解决方案步骤:**

**步骤1: 阅读文档模板**

**步骤2: 定位格式错误**

**步骤3: 严格遵循模板格式修正**

**步骤4: 全面格式检查**

### 类型3: 文档内容错误

**常见问题:**
- 功能点标签(`<FG-*>`)缺失或格式错误
- 检查点标签(`<FC-*>`)缺失或格式错误
- 测试点标签(`<CK-*>`)缺失或格式错误
- 标签命名不规范(小写、使用下划线、包含空格等)
- 标签层次结构混乱(顺序错误、缺少上级标签)
- 必填章节内容缺失

**解决方案步骤:**

**步骤1: 读取功能分析结果**

**步骤2: 识别缺失或错误的标签**

**步骤3: 严格按照分析结果补充内容**

**步骤4: 确保标签层次结构正确**


## 修正工作流程

### 第一步: 理解错误信息

从checker输出中获取:
- 错误类型(代码/格式/内容)
- 错误文件路径
- 具体错误位置(行号)
- 错误描述信息

### 第二步: 判断错误类型

根据错误信息分类:
1. **代码错误** → 检查是模板写法问题还是语法问题
2. **文档格式错误** → 检查Markdown格式是否符合模板
3. **文档内容错误** → 检查标签是否完整且格式正确

### 第三步: 选择对应的解决方案

根据错误类型,执行对应的解决方案步骤:
- 代码错误 → 重读模板 + 修正代码 + 全面语法排查
- 格式错误 → 重读模板 + 修正格式 + 全面格式检查
- 内容错误 → 读分析结果 + 补充标签 + 验证层次

### 第四步: 执行修正

**执行原则:**
- 使用ReadTextFile充分了解上下文
- 使用ReplaceStringInFile修改文件


**核心流程:** 理解错误 → 判断类型 → 选择方案 → 执行修正
